# 1-3 Implement Prompt Storage Manager

[Back to task list](./tasks.md)

## Description

Create the promptManager module that handles all CRUD operations for prompts using VS Code's globalState for persistence.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2025-12-23 12:00:00 | Created | N/A | Proposed | Task file created | User |
| 2025-12-23 14:40:00 | Status Change | Proposed | InProgress | Started implementation | AI Agent |
| 2025-12-23 14:45:00 | Status Change | InProgress | Review | Implementation complete, all CRUD functions implemented | AI Agent |
| 2025-12-23 15:30:00 | Status Change | Review | Done | Task completed and verified | AI Agent |

## Requirements

1. Create `src/promptManager.ts` with:
   - `initializePromptManager(context)` - Initialize with extension context
   - `getPrompts()` - Return all saved prompts
   - `getPromptById(id)` - Return single prompt by ID
   - `addPrompt(name, content, category?)` - Create new prompt with generated ID
   - `updatePrompt(id, updates)` - Update existing prompt
   - `deletePrompt(id)` - Remove prompt by ID
2. Use `context.globalState` for persistence
3. Generate unique IDs using timestamp + random suffix
4. Maintain timestamps (createdAt, updatedAt)

## Implementation Plan

1. Create `src/promptManager.ts`
2. Define storage key constant: `PROMPTS_STORAGE_KEY = 'instaprompt.prompts'`
3. Store ExtensionContext reference for globalState access
4. Implement each CRUD function
5. Handle edge cases (empty storage, missing prompts)

## Verification

- [x] TypeScript compilation passes
- [x] All CRUD functions implemented
- [ ] Prompts persist after VS Code restart (manual test)

## Test Plan

- TypeScript compilation passes without errors
- Manual testing: add prompt, restart VS Code, verify prompt persists
- Manual testing: edit and delete prompts

## Files Modified

- `src/promptManager.ts` (created)

