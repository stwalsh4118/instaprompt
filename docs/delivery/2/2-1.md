# 2-1 Implement Select Prompt Command

[Back to task list](./tasks.md)

## Description

Create the main command handler for the prompt selection quick pick that users trigger via hotkey.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2025-12-23 12:00:00 | Created | N/A | Proposed | Task file created | User |
| 2025-12-23 12:30:00 | Status Change | Proposed | InProgress | Starting implementation | AI Agent |
| 2025-12-23 12:45:00 | Status Change | InProgress | Review | Implementation complete, ready for review | AI Agent |
| 2025-12-23 14:00:00 | Status Change | Review | Done | Task completed and approved | User |

## Requirements

1. Register `instaprompt.selectPrompt` command in extension.ts
2. Show quick pick with all saved prompts
3. Enable fuzzy filtering for fast search
4. Display prompt name as label, truncated content as description
5. Return selected prompt for clipboard handling (Task 2-2)
6. Handle empty prompt list gracefully

## Implementation Plan

1. Create command handler function
2. Get prompts from promptManager
3. Create QuickPickItems with:
   - label: prompt name
   - description: first line of content (truncated)
   - detail: optional category
4. Show quick pick with matchOnDescription enabled
5. Return selected prompt content
6. Handle cancellation and empty state

## Verification

- [x] Command appears in command palette
- [x] Quick pick shows all prompts
- [x] Typing filters prompts by name and content (matchOnDescription enabled)
- [x] Selection returns the prompt content (returns string | undefined)
- [x] Empty state handled gracefully
- [x] TypeScript compilation passes without errors

## Test Plan

- Command registers and appears in palette
- Quick pick displays correctly
- Filtering works as expected
- Selection flow completes without errors

## Files Modified

- `src/extension.ts` (modified) - Added handleSelectPrompt function and registered command
- `package.json` (modified) - Added instaprompt.selectPrompt command and activation event

