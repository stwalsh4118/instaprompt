# 4-6 E2E CoS Test

[Back to task list](./tasks.md)

## Description

End-to-end testing to validate all Conditions of Satisfaction (CoS) for PBI 4 are met. This includes testing the complete workflows for creating, editing, exporting, importing, and copying markdown prompts.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2025-12-25 12:00:00 | Created | N/A | Proposed | Task file created | User |

## Requirements

1. Test all CoS from PBI 4 PRD
2. Test complete user workflows
3. Verify backward compatibility with existing prompts
4. Document test results
5. Fix any issues found

## Implementation Plan

1. **CoS 1: Webview editor for create/edit**:
   - Create new prompt using webview editor
   - Edit existing prompt using webview editor
   - Verify live preview works
   - Verify save/cancel work correctly

2. **CoS 2: Export prompts as .md files**:
   - Export single prompt
   - Export multiple prompts
   - Verify files are created correctly
   - Verify file content matches prompt content

3. **CoS 3: Import .md files as prompts**:
   - Import single .md file
   - Import multiple .md files
   - Verify prompts are created correctly
   - Verify prompt content matches file content

4. **CoS 4: Markdown preserved in clipboard**:
   - Copy prompt with markdown formatting
   - Paste into text editor
   - Verify markdown syntax is preserved

5. **CoS 5: Backward compatibility**:
   - Verify existing plain text prompts still work
   - Verify existing prompts can be edited in webview
   - Verify existing prompts can be copied normally

6. **Additional scenarios**:
   - Test with various markdown features (headers, lists, code blocks, emphasis, links)
   - Test with template variables in markdown prompts
   - Test error handling (file errors, cancellation, etc.)
   - Test edge cases (empty prompts, very long prompts, special characters)

## Verification

- [ ] All CoS from PBI 4 PRD are met
- [ ] Webview editor works for create and edit
- [ ] Export functionality works correctly
- [ ] Import functionality works correctly
- [ ] Clipboard preserves markdown
- [ ] Backward compatibility maintained
- [ ] Error handling works correctly
- [ ] Edge cases handled appropriately

## Test Plan

### Test Scenarios

1. **Create markdown prompt**:
   - Open "Add Prompt" command
   - Enter prompt name
   - Edit markdown in webview (add headers, lists, code blocks)
   - Verify preview updates in real-time
   - Save prompt
   - Verify prompt is created with markdown content

2. **Edit markdown prompt**:
   - Open "Edit Prompt" command
   - Select existing prompt
   - Edit markdown in webview
   - Verify preview updates
   - Save changes
   - Verify prompt is updated

3. **Export prompt**:
   - Open "Export Prompt" command
   - Select prompt(s) to export
   - Choose save location
   - Verify .md file(s) created
   - Open file, verify content matches prompt

4. **Import prompt**:
   - Create .md file with markdown content
   - Open "Import Prompt" command
   - Select .md file(s)
   - Verify prompt(s) created
   - Verify prompt content matches file content

5. **Copy markdown prompt**:
   - Select prompt with markdown formatting
   - Copy to clipboard
   - Paste into text editor
   - Verify markdown syntax preserved

6. **Backward compatibility**:
   - Use existing plain text prompt
   - Edit in webview (should work)
   - Copy to clipboard (should work)
   - Verify no regressions

7. **Template variables with markdown**:
   - Create prompt with markdown and template variables
   - Copy prompt, resolve variables
   - Verify markdown preserved after resolution

## Files Modified

- Test documentation/results (if creating test documentation)
- Any bug fixes found during testing

