# 3-2 Implement Built-in Variable Resolvers

[Back to task list](./tasks.md)

## Description

Implement the built-in variable resolvers for common editor context values.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2025-12-23 12:00:00 | Created | N/A | Proposed | Task file created | User |
| 2025-12-25 10:00:00 | Status Change | Proposed | InProgress | Started implementation | AI Agent |
| 2025-12-25 10:10:00 | Status Change | InProgress | Review | Implementation complete | AI Agent |
| 2025-12-25 10:15:00 | Status Change | Review | Done | Task approved and completed | User |

## Requirements

1. Implement resolvers for:
   - `{FILENAME}` - Current file name (basename only)
   - `{FILEPATH}` - Full file path
   - `{SELECTION}` - Currently selected text
   - `{CLIPBOARD}` - Current clipboard content
   - `{LINE}` - Current line number (1-indexed)
2. Handle cases where no editor is active
3. Return undefined when value cannot be resolved (triggers manual fallback)

## Implementation Plan

1. Create resolver functions in templateEngine.ts
2. Register each resolver in the resolver registry
3. Implement each resolver:
   - FILENAME: `path.basename(activeEditor.document.fileName)`
   - FILEPATH: `activeEditor.document.uri.fsPath`
   - SELECTION: `activeEditor.document.getText(activeEditor.selection)`
   - CLIPBOARD: `vscode.env.clipboard.readText()`
   - LINE: `(activeEditor.selection.active.line + 1).toString()`
4. Handle no active editor gracefully

## Verification

- [x] Each variable resolves correctly when editor is active
- [x] Empty selection returns empty string
- [x] No active editor returns undefined (not crash)
- [x] Line number is 1-indexed

## Test Plan

- FILENAME returns file name without path
- SELECTION returns highlighted text
- CLIPBOARD returns clipboard content
- LINE returns current cursor line number
- No active editor handled gracefully

## Files Modified

- `src/templateEngine.ts` (modified)
- `package.json` (modified - added @types/node dev dependency)


