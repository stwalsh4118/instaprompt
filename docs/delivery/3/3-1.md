# 3-1 Create Template Engine Module

[Back to task list](./tasks.md)

## Description

Create the template engine module that parses template variables and orchestrates their resolution.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2025-12-23 12:00:00 | Created | N/A | Proposed | Task file created | User |
| 2025-12-24 10:00:00 | Status Change | Proposed | InProgress | Started implementation | AI Agent |
| 2025-12-24 10:05:00 | Status Change | InProgress | Review | Implementation complete | AI Agent |
| 2025-12-25 10:15:00 | Status Change | Review | Done | Task approved and completed | User |

## Requirements

1. Create `src/templateEngine.ts`
2. Implement `parseVariables(content: string): string[]` - Extract all variable names
3. Implement `resolveTemplate(content: string): Promise<string>` - Main resolution function
4. Use regex pattern: `\{([A-Z_]+)\}` for variable detection
5. Support multiple occurrences of same variable (resolve once, replace all)
6. Provide extension point for registering variable resolvers

## Implementation Plan

1. Create `src/templateEngine.ts`
2. Define constants:
   - `VARIABLE_PATTERN = /\{([A-Z_]+)\}/g`
3. Implement parseVariables() using regex
4. Create resolver registry (Map of name â†’ resolver function)
5. Implement resolveTemplate():
   - Parse all unique variables
   - Resolve each variable (built-in or manual)
   - Replace all occurrences in content
6. Export functions and types

## Verification

- [x] parseVariables extracts all variable names
- [x] resolveTemplate handles templates with no variables
- [x] Multiple occurrences of same variable handled correctly
- [x] TypeScript compilation passes

## Test Plan

- parseVariables correctly extracts `{VAR}` patterns
- Templates without variables return unchanged
- Same variable appears multiple times, resolved once

## Files Modified

- `src/templateEngine.ts` (created)

